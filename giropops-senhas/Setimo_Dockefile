# Etapa de construção (builder)
FROM debian:rc-buggy-20250317 AS builder

WORKDIR /app

# Atualiza e instala dependências no builder
RUN apt-get update -y && \
    apt-get install -y python3-pip

# Copia os arquivos da aplicação
COPY app.py .  
COPY templates templates/  
COPY static static/  


# Etapa final (runtime)
FROM cgr.dev/chainguard/python:latest

WORKDIR /app

# Copia os arquivos da aplicação
COPY --from=builder /app .

# Expõe a porta padrão do Flask
EXPOSE 5000

# Define o comando correto para rodar o Flask
CMD ["/usr/bin/app.py"]
