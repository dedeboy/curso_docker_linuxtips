FROM debian:rc-buggy-20250317 AS builder

WORKDIR /app

RUN apt-get update -y && apt-get install python3-pip -y && apt-get install python3-flask -y


FROM cgr.dev/chainguard/python:latest
WORKDIR /usr/bin/
COPY app.py .
COPY templates templates/
COPY static static/

COPY --from=builder /usr/lib/python3/dist-packages/flask* /usr/lib/python3/dist-packages/ 
COPY --from=builder /usr/bin/flask /usr/bin/flask 

EXPOSE 5000

CMD ["flask", "run", "--host=0.0.0.0"]

